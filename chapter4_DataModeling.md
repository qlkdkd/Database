# 데이터 모델링
1. 데이터 모델링과 데이터 모델의 개념
2. 개체-관계 모델
3. 논리적 데이터 모델

## 학습목표
![image](https://github.com/qlkdkd/Database/assets/71871927/d1186e73-79ff-4cfa-8d08-72a0ac05f720)
* 데이터 모델링과 데이터 모델의 개념을 이해한다.
* 개념적 데이터 모델인 개체-관계 모델을 이용해 모델링하는 방법을 익힌다.
* 개체-관계 다이어그램을 작성하는 방법을 익힌다.
* 논리적 데이터 모델의 종류와 특징을 이해한다.

---

# 1. 데이터 모델링과 데이터 모델의 개념
## 데이터 모델
* 현실 세계의 정보들을 컴퓨터에 표현하기 위해서 단순화, 추상화하여 체계적으로 표현한 모형
* 데이터, 데이터의 관계, 데이터의 의미 및 일관성, 제약 조건 등을 기술
* 현실 세계를 데이터베이스에 표현하는 중간 과정, 즉 데이터베이스 설계 과정에서 데이터의 구조를 논리적으로 표현

## 데이터 모델링
* 현실 세계에 존재하는 데이터를 컴퓨터 세계의 데이터베이스로 옮기는 과정
* 데이터베이스 설계의 핵심 과정
* 현실 세계의 정보들을 컴퓨터에 표현하기 위해서 단순화, 추상화하여 체계적으로 표현한 개념적 모형
![image](https://github.com/qlkdkd/Database/assets/71871927/3fd7f000-fb06-4faa-8edf-c4d50c84d13e)
![image](https://github.com/qlkdkd/Database/assets/71871927/4ac6b223-c255-4d7b-b452-d386faa4d403)

## 데이터 모델링 2단계
* 개념적 데이터 모델링(conceptual modeling): 현실 세계의 중요 데이터를 추출하여 개념 세계로 옮기는 작업
* 논리적 데이터 모델링(logical modeling): 개념 세계의 데이터를 DB에 저장하는 구조로 표현하는 작업
![image](https://github.com/qlkdkd/Database/assets/71871927/7dfd0b3b-9eb3-46b1-9464-81043abb8a2f)

## 데이터 모델: 데이터 모델링의 결과물을 표현하는 도구
* 개념적 데이터 모델: **사람의 머리로 이해할 수 있도록** 현실 세계를 개념적 모델링하여 DB의 개념적 구조로 표현하는 도구(예: 개체-관계 모델)
* 논리적 데이터 모델: 개념적 구조를 **논리적으로 모델링**하여 DB의 논리적 구조로 표현하는 도구(예: 관계-데이터 모델)

## 데이터 모델의 구성
### 데이터 구조(Data Structure)
* 개념적 데이터 모델에서 개념적 구조: 현실 세계를 개념 세계로 추상화했을 때 어떤 요소로 이루어져 있는지 표현
* 논리적 데이터 모델에서 논리적 구조: 데이터를 어떤 모습으로 저장할 것인지 표현
* 정적 특징
### 연산
* 개념 세계나 컴퓨터 세계에서 실제로 표현된 값들을 처리하는 작업
* 동적 특징
### 제약 조건(constraint): 데이터 무결성 유지 목적
* 구조적 측면의 제약 사항
* 연산을 적용하는 경우 허용할 수 있는 의미적 측면의 제약 사항
![image](https://github.com/qlkdkd/Database/assets/71871927/ca7a933b-349b-43e3-83fe-49c2b8837445)

---

# 2. 개체-관계 모델
## 개체-관계 모델(E-R model; Entity-Relationship model)
* 피터 첸(Peter Chen)이 제안한 개념적 데이터 모델
* 개체와 개체 간의 관계를 이용해 현실 세계를 개념적 구조로 표현
* 핵심 요소: 개체, 속성, 관계

## 개체-관계 다이어그램(E-R diagram)
* 개체-관계 모델을 이용하여 현실 세계를 개념적으로 모델링한 결과물을 그림으로 표현한 것

## 개체
* 현실 세계에서 조직을 운옇아는 데 꼭 필요한 삶이나 사물과 같이 구별되는 모든 것, 개념적으로만 존재하는 것도 개체가 될 수 있음음
* E-R 다이어그램에서 사각형으로 표현하고 사각형 안에 이름을 표기
![image](https://github.com/qlkdkd/Database/assets/71871927/711e8bbf-2400-408b-92eb-2b5c63758093)

## 속성
* 개체나 관계가 가지고 있는 고유한 특성
* 의미있는 데이터의 가장 작은 논리적 단위
* 파일 구조의 필드(field)와 대응됨
* E-R다이어그램에서 타원으로 표현하고 타원 안에 이름을 표기
![image](https://github.com/qlkdkd/Database/assets/71871927/524b02b6-f23a-47b5-a835-95a45f248943)

### 개체 타입
* 개체를 고유한 이름과 속성들로 정의한 것
* 파일 구조의 레코드 타입(record type)에 대응됨
### 개체 인스턴스
* 개체를 구성하고 있는 속성이 실제 값을 가짐으로써 실체화된 개체
* 개체 어커런스(entity occurrence)라고도 함
* 파일 구조의 레코드 인스턴스(record instance)에 대응됨
### 개체 집합(entity set)
* 특정 개체 타입에 대한 개체 인스턴스들을 모아놓은 것
![image](https://github.com/qlkdkd/Database/assets/71871927/7ff95bfe-43ac-462c-acc3-ab39374e1e1f)
![image](https://github.com/qlkdkd/Database/assets/71871927/c5a70b9c-a855-449f-9f8f-085e4cb8d0f0)

### 단일 값 속성과 다중 값 속성
* 단일 값 속성(single valued attribute): 값을 하나만 가질 수 있는 속성(예: 고객 개체의 이름, 적립금 속성)
* 다중 값 속성(multi valued attribute):  값을 여러개 가질 수 있는 속성(예: 고객 개체의 연락처 속성, 책 개체의 저자 속성), E-R 다이어그램에서 이중 타원으로 표현
![image](https://github.com/qlkdkd/Database/assets/71871927/1d452cf7-61a2-4c1d-9422-d0f76a45bc7a)

## 단순 속성과 복합 속성
* 단순 속성: 의미를 더는 분해할 수 없는 속성(예: 고객 개체의 적립금 속성, 책 개체의 이름, ISBN, 가격 속성)
* 복합 속성: 의미를 분해할 수 있는 속성(예: 고객 개체의 주소 속성(도, 시, 동, 우편번호 등으로 의미 세분화 가능))
![image](https://github.com/qlkdkd/Database/assets/71871927/f9dfd805-5184-45eb-abd9-9f67b0a0b267)

## 유도 속성
* 기존의 다른 속성의 값에서 유도되어 결정되는 속성
* **값이 별도로 저장되지 않음**(입력 필요 X)
* 예: 책 개체의 가격과 할인율 속성으로 계산되는 판매가격 속성
* ER다이어그램에서 점선 타원으로 표현
![image](https://github.com/qlkdkd/Database/assets/71871927/19e5168d-410b-477f-b31d-c8d7904cbdfd)

## 널(null) 속성: 널 값이 허용되는 속성
널 값: 아직 결정되지 않았거나 모르는 값 또는 존재하지 않는 값. 공백이나 0과는 의미가 다름(예: 등급 속성이 널값->등급이 결정되지 않음)

## 키 속성
* 각 개체 인스턴스를 식별하는 데 사용되는 속성
* 모든 개체 인스턴스의 키 속성 값이 다름
* 둘 이상의 속성들로 구성되기도 함
* 예) 고객 개체의 고객아이디 속성
* E-R다이어그램에서 밑줄로 표현
* 키 속성에는 널값이 올 수 없다.
![image](https://github.com/qlkdkd/Database/assets/71871927/30e4d11d-e100-43fd-a83e-9228f42f87a7)

## 관계
* 개체와 개체가 맺고 있는 의미 있는 연관성
* 개체 집합들 사이의 대응 관계, 즉 매핑(mapping)을 의미
* 예) 고객 개체와 책 개체 간의 구매 관계(고객은 책을 구매한다)
* 관계도 개체처럼 속성을 가질 수 있음
* ER 다이어르램에서 마름모로 표현
![image](https://github.com/qlkdkd/Database/assets/71871927/21e01a80-c345-49db-9cd5-3f66f3170aec)

## 관계의 유형: 관계에 참여하는 개체 타입의 수 기중
* 이(二)항 관계; 개체 타입이 2개가 맺는 관계
* 삼(三)항 관계: 개체 타입 3개가 맺는 관계
* 순환 관계: 개체 타입 1개가 자기 자신과 맺는 관계

## 관계의 유형: 매핑 카디널리티 수준
* 매핑 카디널리티(Mapping Cardinality): 관계를 맺는 두 개체 집합에서, 각 개체 인스턴스가 연관성을 맺고 있는 상대 개체 집합의 인스턴스 개수
* 1:1 관계, 1:n 관계, 다:다(n:m)관계

## 1대1 관계
* 개체 A의 각 개체 인스턴스 가 개체 B의 각 개체 인스턴스 하나와 관계를 맺을 수 있고, 개체 B의 각 개체 인스턴스도 개체 A의 개체 인스턴스와 관계를 맺을 수 있다 -> **1대1 관계**

![image](https://github.com/qlkdkd/Database/assets/71871927/e7e7e8f5-48ab-4aa5-b003-6eec5f616ff3)
* 예)대한민국에서는 남편 1명이 아내 1명과 혼인관계를 맺어야 함, 아내도 남편 1명과 혼인 관계를 맺어야 함-> 1대1 관계

![image](https://github.com/qlkdkd/Database/assets/71871927/8f4ddcab-8e5a-42df-b55b-3ea967b960e3)

## 1대다(1:n)관계
* 개체 A의 각 개체 인스턴스는 개체 B의 개체 인스턴스 여러개와 관계를 맺을 수 있음
* 그러나 개체 B의 인스턴스는 개체 A의 인스턴스 하나와 관계를 맺을 수 있음-> **1대다 관계**

![image](https://github.com/qlkdkd/Database/assets/71871927/1502ae6e-8543-4b76-9a3c-a8e077e2de17)
* 예) 일반적으로 한 부서에는 사원이 여러 명 소속될 수 있지만, 사원 한 명은 부서 하나에만 소속됨 -> 1대다 관계

## 다대다(n:m)관계
* 개체 A의 각 개체 인스턴스가 개체 B의 개체 인스턴스 여러개와 관계를 맞을 수 있음
* 그리고 개체 B의 각 개체 인스턴스도 개체 A의 개체 인스턴스 여러개와 관계를 맺을 수 있음 -> **다대다 관계**

![image](https://github.com/qlkdkd/Database/assets/71871927/1e37d482-00e4-4c4b-ab09-b08eeebfae20)
* 예) 고객 1명이 책을 여러권 구매 가능, 책은 한 종류가 여러 고객에게 판매될 수 있음 -> 다대다 관계

## 관계의 참여 특성
* 필수적 참여(전체 참여): 개체 A와 B 사이에서 개체 A의 모든 개체 인스턴스가 관계에 반드시 참여해야 함(예: 고객 개체와 책 개체 사이의 구매 관계에서, 모든 고객이 책을 반드시 구매해야한다는 제약 조건이 있다면 고객 개체가 구매 관계에 필수적 참여)
* 선택적 참여(부분 참여): 개체 A의 개체 인스턴스 중 일부만 관계에 참여해도 됨(예: 고객이 구매하지 않은 책이 존재할 수 있다면, 책 개체가 구매 관계에 선택적 참여)
![image](https://github.com/qlkdkd/Database/assets/71871927/a1255b61-ad77-47e1-8eaf-6f90208eeb1b)

## 관계의 종속성
* 약한 개체(weak entity): 다른 개체의 존재 여부에 의존적인 개체
* 강한 개체(strong entity): 다른 개체의 존재 여부를 결정하는 개체
* 예시) 직원 개체와 부양가족 개체: 회사에 새로운 직원입사->해당 직원의 부양가족 데이터도 함께 저장, 직원 퇴사 -> 퇴사 직원의 부양가족 데이터도 함께 삭제

* 특징
    * 강한 개체와 약한 개체는 일반적으로 일대다 관계
    * 약한 개체는 강한 개체와의 관계에 필수적으로 참여
    * 약한 개체는 강한 개체의 키를 포함하여 키를 구성
* 예시) 직원개체(강한 개체)와 부양가족 개체(약한 개체)는 일반적으로 일대다 관계. 부양하는 직원이 있어야 부양가족도 존재-> 부양가족은 부양관계에 필수적으로 참여. 한 직원의 부양가족 중 이름이 같은 사람은 없음->직원별로 보면 이름 속성이 부양 가족을 식별하는 역할(그러나 다른 직원의 부양 가족 이름과 같은 경우에는 직원 이름 대신 직원 번호 속성으로 키를 구성)

* E-R다이어그램에서 약한 개체는 이중 사각형으로 표현, 약한 개체가 강한 개체와 맻는 관계는 이중 마름모로 표현
![image](https://github.com/qlkdkd/Database/assets/71871927/7af21ddb-30a2-4d3a-9a4f-f12c13104354)

## E-R 다이어그램
* 사각형: 개체
* 마름모: 관계
* 타원: 속성
* 링크(연결선): 각 요소를 연결
* 레이블: 일대일, 일대다, 다대다 관계를 표현

![image](https://github.com/qlkdkd/Database/assets/71871927/309693b9-eb16-4b75-a692-ea878d32eb06)
* 고객 개체: 고객아이디, 고객명, 적립금 속성으로 구성
* 책 개체: ISBN, 제목, 저자, 가격 속성으로 구성
* 출판사: 출판사번호, 이름, 위치, 전화번호 속성으로 구성
* 고객개체와 책 개체 사이에 구매관계 존재, 다대다 관계
* 구매 관계: 구매일자, 결제 방식 속성으로 구성
* 출판사 개체와 책 개체 사이에는 공급 관계, 일대다 관계
* 공급 관계에는 특별한 속성 없음

---

# 3. 논리적 데이터 모델 
## 논리적 데이터 모델의 개념과 특성
* 논리적 데이터 모델: E-R 다이어그램으로 표현된 개념적 구조를 데이터베이스에 저장할 현태로 표현한 논리적 구조
* 데이터베이스의 논리적 구조 = 데이터베이스 스키마(schema)
* 사용자가 생각하는 데이터베이스의 모습 또는 구조
* 관계 데이터 모델(일반적으로 많이 사용되는 논리적 데이터 모델, 2차원 테이블 형태), 계층 데이터 모델, 네트워크 데이터 모델 등이 있음

## 계층 데이터 모델
* 데이터베이스의 논리적 구조가 트리 형태
* 개체: 사각형, 개체들 간의 관계는 링크(연결선)으로 나타냄, 링크는 1대다 관계만 표현 가능, 계층 데이터 모델은 두 개체 사이에 관계를 하나만 정의할 수 있어 관계에 이름을 붙여 구별할 필요가 없음
* 계층 데이터 모델에서는 다대다 관계를 직접 표현할 수 없어 별도의 개체를 추가로 생성하여 이를 표현
![image](https://github.com/qlkdkd/Database/assets/71871927/eb3db67a-f0b4-4351-a9d3-6e2ce1153129)

* 루트 역할을 하는 개체가 존재하고 사이클이 존재하지 않음
* 일대다 관계를 맺는 개체들 사이에는 상하 관계가 성립(부모 개체(상위)/자식 개체(하위), 일대다 관계)
* 두 개체 사이에 하나의 관계만 정의할 수 있음
![image](https://github.com/qlkdkd/Database/assets/71871927/e3534e66-9327-4526-97b5-bb332537fe97)


## 네트워크 데이터 모델
* 데이터베이스의 논리적 구조: 그래프 또는 네트워크 형태
* 개체: 사각형, 개체들 간의 관계: 화살표(일대다 관계 표현만 직접 표현 가능 -> 두 개체 사이의 일대다 관계들을 이용하여 다대다 관계 표현)
* 네트워크 데이터 모델이서는 일대다 관계의 개체들을 각각 오너와 멤버로 부름. 이들 사이의 관계를 오너-멤버 관계라 함
* 오너 개체 하나가 맴버 개체 여러개와 관계 맺을 수 있음, 맴버도 오너 개체 여러개와 관계 맺을 수 있음
![image](https://github.com/qlkdkd/Database/assets/71871927/3679c9e6-b791-4740-9d37-e015619df0b5)

* 네트워크 데이터 모델은 같은 개체들 사이의 관계를 2개 이상 표현할 수 있어 계층 데이터 모델보다 개념적 구조를 논리적 구조로 좀 더 자연스럽게 모델링할 수 있음
* 계층 데이터 모델보다 훨씬 복잡하여 데이터의 삽입, 삭제, 수정, 검색이 쉽지 않음
