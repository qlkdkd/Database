# 관계 데이터 연산
1. 관계 데이터 연산의 개념
2. 관계 대수
3. 관계 해석

#### 학습 목표
![image](https://github.com/qlkdkd/Database/assets/71871927/794fbc3b-5ef1-40df-ae68-18176a2360dc)
* 관계 데이터 연산의 개념과 종류를 알아본다.
* 일반 집합 연산자와 순수 관계 연산자의 차이를 이해한다.
* 일반 집합 연산자와 순수 관계 연산자를 이용해 질의를 표현하는 방법을 익힌다.
* 관계 해석의 개념을 간단히 정리해본다.

---

## 1. 관계 데이터 연산의 개념
#### 데이터 모델= 데이터 구조 + 연산 + 제약조건
![image](https://github.com/qlkdkd/Database/assets/71871927/76f9b633-b24c-4745-89c5-73b3eaf51b9a)

#### 관계 데이터 연산(relational data operation)
* 관계 데이터 모델의 **연산**
* *원하는 데이터를 얻기 위해* 릴레이션에 필요한 처리 요구를 수행하는 것
* **관계 대수**와 **관계 해석**
  * 기능과 표현력 측면에서 동등한 능력
> 관계 데이터 연산
> 
> 관계 대수: 원하는 결과를 얻기 위해 데이터의 *처리 과정을* **순서대로 기술**
> 
> 관계 해석: 원하는 결과를 얻기 위하 처리를 원하는 데이터가 무엇인지만 기술

#### 관계 대수와 관계 해석의 역할
* 데이터 언어의 유용성을 검증하는 기준
* 관계 대수나 관계 해석으로 기술할 수 있는 모든 질의를 기술할 수 있는 데이터 언어 -> 관계적으로 완전(relationally complete)하다고 판단
 * 질의(query): 데이터에 대한 처리 요구

---

## 2. 관계 대수

#### 관계 대수(relational algeber)의 개념
* 절차 언어(procedural language)
 * 원하는 결과를 얻기 위해 릴레이션 처리 과정을 순서대로 기술하는 언어

* 릴레이션을 처리하는 연산자들의 모임
 * 대표 연산자 8개
 * 일반 집합 연산자와 순수 관계 연산자로 분류

* 폐쇄 특성(closure property)
 * 피연산자도 릴레이션이고 연산의 결과도 릴레이션

#### 관계 대수의 연산자
* 일반 집합 연산자
   * 합집합: $\cup$
   * 교집합: $\cap$
   * 차집합: -
   * 카티션 프로덕트: $\times$

* 순수 관계 연산자
   * 셀렉트: $\sigma$
   * 프로젝트: $\pi$
   * 조인: $\triangleright \triangleleft$
   * 디비전: $\div$

#### 일반 집합 연산자
* 릴레이션이 튜플의 집합이라는 개념을 이용하는 연산자

연산지|기호|표현|의미
---|---|---|---
합집합|$\cup$|$R\cup S$|릴레이션 R과 S의 합집합을 반환
교집합|$\cap$|$R\cap S = (R-R\cap S)$|릴레이션 R과 S의 교집합을 반환
차집합|$-$|$R-S$|릴레이션 R과 S의 차집합을 반환
카티션 프로덕트|$\times$|$R \times S$| 릴레이션 R의 각 튜플과 릴레이션 S의 각 튜플을 모두 연결하여 만든 새로운 튜플을 반환

![image](https://github.com/qlkdkd/Database/assets/71871927/196ec504-f9b5-46f6-bc31-95c73922b8f9)

#### 일반 집합 연산자의 특성
* 피연산자가 2개 필요
   * 2개의 릴레이션을 대상으로 연산 수행

* 합집합, 교집합, 차집합은 피연산지인 **두 릴레이션이 합병 가능해야함**
   * *합병 가능(Union Compatible) 조건*
      * 두 릴레이션의 *차수가 같아야 함*
      * 두 릴레이션에서 **서로 대응되는 속성의 도매인이 같아야 함**
![image](https://github.com/qlkdkd/Database/assets/71871927/2467aa14-bbff-4df9-b410-439b509be66c)
* 불가능 한 예 이유: 고객릴레이션과 직원 릴레이션의 차수는 서로 같으나 속성이 다르다(고객: int, char, int, 직원: int, char, char)
* 가능한 예 이유: 둘 다 차수와 속성이 같다.

#### 일반 집합 연산자 - 합집합(union)
* 합병 가능한 두 릴레이션 R과 S의 합집합: $R \cup S$
   * 릴레이션 R에 속하거나 릴레이션 S에 속하는 모든 튜플로 결과 릴레이션 구성
* 결과 릴레이션의 특성
   * 차수는 릴레이션 R과 S의 차수와 같음
   * 카디널리티는 릴레이션 R과 S의 카디널리티를 더한 것과 같거나 적어짐
* 교환적 특징이 있음
   * $R \cup S = S \cup R$
* 결합적 특징이 있음
   * $(R \cup S)\cup T = R \cup(S \cup T)$

![image](https://github.com/qlkdkd/Database/assets/71871927/e5d4df01-f435-408c-8ddb-ab93c00fc326)

#### 일반 집합 연산자 - 교집합
* 합병 가능한 두 릴레이션 R과 S의 교집합: $R \cap S$
   * 릴레이션 R과 S에 공통으로 속하는 튜플로 결과 릴레이션 구성
* 결과 릴레이션의 특성
   * 차수는 릴레이션 R과 S의 차수와 같음
   * 카디널리티는 릴레이션 R과 S의 어떤 카디널리티보다 크지 않음(같거나 작음)
* 교환적 특징이 있음
   * $R \cap S = S \cap R$
* 결합적 특징이 있음
   * $(R \cap S)\cap T = R \cap (S \cap T)$

![image](https://github.com/qlkdkd/Database/assets/71871927/9fa43ada-cd38-4190-bab9-7cda4b8bce03)

#### 일반 집합 연산자 - 차집합
* 합병 가능한 두 릴레이션 R과 S의 차집합: $R-S$
   * 릴레이션 R에는 존재하지만 릴레이션 S에는 존재하지 않는 튜플로 결과 릴레이션 구성
* 결과 릴레이션 특성
   * 차수는 릴레이션 R과 S의 차수와 같음
   * R-S의 카디널리티는 릴레이션 R의 카니널리티와 같거나 작음
   * $S-R$의 카디널리티는 릴레이션 S의 카디널리티와 같거나 작음
* 교환적, 결합적 특징이 없음

![image](https://github.com/qlkdkd/Database/assets/71871927/80148e66-fb4a-439d-8c5f-a91a22702467)

#### 일반 집합 연산자 - 카티션 프로덕트(cartesian product)
* 두 릴레이션 R과 S의 카티션 프로덕트: $R \times S$
   * 릴레이션 *R에 속한 각 튜플*과 *릴레이션 S에 속한 각 튜플을 모두 연결*하여 만들어진 **새로운 튜플로 결과 릴레이션을 구성**
* 결과 릴레이션의 특성
   * **차수는** 릴레이션 **R과 S의 차수를 더한 것과 같음**
   * **카디널리티는** 릴레이션 **R과 S의 카디널리티를 곱한 것과 같음**
* 교환법칙, 결합법칙 성립됨
![image](https://github.com/qlkdkd/Database/assets/71871927/ef3801c7-6c51-4438-9883-4c3e223ef920)
